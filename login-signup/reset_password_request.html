<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="../img/logo.png" type="image/png">

  <title>Reimposta Password | MyGymStats</title>
  <meta name="description" content="Hai dimenticato la password? Reimpostala facilmente con MyGymStats e torna subito a monitorare i tuoi progressi in palestra." />
  <meta name="keywords" content="reset password palestra, reimposta password MyGymStats, account fitness, recupero accesso" />
  <meta name="author" content="MyGymStats Team" />

  <link rel="stylesheet" href="reset_password.css" />
  <link rel="stylesheet" href="../commonCSS/reset.css" />
  <link rel="stylesheet" href="../commonCSS/commonNavbar.css" />
  <link rel="stylesheet" href="../commonCSS/footer.css" />
</head>

<body>
    <nav class="navbar" aria-label="Menu di navigazione principale">
        <button class="hamburger-menu" aria-label="Apri Menu di Navigazione">☰</button>
  
        <div class="logo">
          <a href="../index.html" aria-label="Homepage MyGymStats">
            <img src="../img/logo.png" alt="Logo MyGymStats - App di fitness e progressi" class="logo-img" />
          </a>
        </div>
  
        <ul class="nav-links">
          <li><a href="../index.html">Home</a></li>
          <li><a href="#" onclick="controllaAccesso('../account/account.php')" data-section="Progressi">Progressi</a></li>
          <li><a href="../faq/faq.html" data-section="FAQ">FAQ</a></li>
          <li><a href="../chiSiamo/chisiamo.html">Chi siamo</a></li>
          <li><a href="../contatti/contatti.html" data-section="Contatti">Contatti</a></li>
        </ul>
  
        <div class="profile-container" data-section="Profile">
          <a href="#" aria-label="Profilo utente">
            <img id="profile-pic" src="../img/utente_without_bg.png" alt="Icona Profilo Utente" />
          </a>
          <div class="dropdown-menu" id="profile-menu">
            <a href="#" onclick="controllaAccesso('profile.html')">👤 Profilo</a>
            <a href="#" onclick="controllaAccesso('settings.html')">⚙️ Impostazioni</a>
            <a href="#" onclick="logout()">🚪 Logout</a>
          </div>
        </div>
      </nav>

  <main class="container-form">
    <form id="reset-form" method="POST" aria-label="Modulo reset password">
      <h1>🔐 Reimposta la tua Password</h1>
      <p class="subtitle">
        Hai dimenticato le credenziali di accesso al tuo account <strong>MyGymStats</strong>? Nessun problema. Inserisci il tuo indirizzo email e ti invieremo il link per creare una nuova password.
      </p>

      <div class="input-group">
        <label for="email">📧 Email associata all'account</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="esempio@email.com"
          required
          aria-required="true"
        />
      </div>

      <button type="submit" class="principal_button-100w">📨 Invia Link di Reset</button>

      <a href="login.html" class="secondary_button">← Torna al login</a>
    </form>
  </main>

  <section id="feedback-area" aria-live="polite"></section>

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-section">
        <h2 class="footer-title">MyGymStats</h2>
        <p class="footer-text">
          Con MyGymStats monitori facilmente i tuoi allenamenti, progressi e obiettivi fitness. Tutto in un'unica piattaforma.
        </p>
        <p class="footer-text" style="font-style: italic; font-weight: 600">
          “Disciplina, costanza, risultati. Ogni giorno conta.”
        </p>
      </div>
      <div class="footer-section">
        <h3 class="footer-subtitle">Link utili</h3>
        <ul class="footer-links">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../faq/faq.html">FAQ</a></li>
          <li><a href="../chiSiamo/chisiamo.html">Chi siamo</a></li>
          <li><a href="../contatti/contatti.html">Contatti</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3 class="footer-subtitle">Contatti</h3>
        <p>Email: <a href="mailto:info@mygymstats.com">info@mygymstats.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2025 MyGymStats. Tutti i diritti riservati.
    </div>
  </footer>

  <script>
    const form = document.getElementById("reset-form");
    form.addEventListener("submit", function (event) {
      event.preventDefault();
      document.getElementById("feedback-area").innerHTML = "";

      const formData = new FormData(form);
      fetch("send_reset_link.php", {
        method: "POST",
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        addMessage(data.success ? "success" : "error", data.message);
      })
      .catch(error => {
        console.error("Errore di rete:", error);
        addMessage("error", "Errore di connessione al server. Riprova più tardi.");
      });
    });

    function addMessage(type, message) {
      const feedback = document.createElement("p");
      feedback.textContent = message;
      feedback.style.color = type === "success" ? "green" : "red";
      document.getElementById("feedback-area").appendChild(feedback);
    }
  </script>

  <script src="../commonJS/commonNavbar.js"></script>
  <script src="../commonJS/commonScript.js"></script>
</body>
</html>
