<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostazioni</title>
    <link rel="stylesheet" href="settings.css">

    <link rel="stylesheet" href="../commonCSS/commonNavbar.css">
    <link rel="stylesheet" href="../commonCSS/buttons.css" />
    <link rel="stylesheet" href="../commonCSS/reset.css" />
    <link rel="stylesheet" href="../commonCSS/_variables.css">
</head>
<body>
    <nav class="navbar" aria-label="Menu di navigazione principale">
        <button class="hamburger-menu" aria-label="Apri Menu di Navigazione">‚ò∞</button>
        <div class="logo">
            <img src="../img/logo.png" alt="Logo Palestra">
        </div>
        <ul class="nav-links">
            <li><a href="../index.html">Home</a></li>
            <li><a href="#" onclick="controllaAccesso('account.php', false)" data-section="Progressi">Progressi</a></li>
            <li><a href="../faq/faq.html"  data-section="FAQ">FAQ</a></li>
            <li><a href="../chiSiamo/chisiamo.html">Chi siamo</a></li>
            <li><a href="../contatti/contatti.html" data-section="Contatti">Contatti</a></li>
            <li class = "profile-container" data-section="Profile">
                <a href="#">
                    <img id="profile-pic" src="../img/utente_without_bg.png" alt="Profilo">
                </a>
                <div class="dropdown-menu" id="profile-menu">
                    <a href="#" onclick="controllaAccesso('profile.html')">üë§ Profilo</a>
                    <a href="#" onclick="controllaAccesso('settings.html')">‚öôÔ∏è Impostazioni</a>
                    <a href="#" onclick="logout()">üö™ Logout</a>
                </div>
            </li>
        </ul>
    </nav>

    <div class="settings">
        <h3>‚öôÔ∏è Impostazioni</h3>

        <!-- Sezione di navigazione -->
        <div class="navigation">
            <button onclick="vaiAlProfilo()">üë§ Torna al Profilo</button>
            <button onclick="vaiAiProgressi()">üìä Visualizza Progressi</button>
        </div>

        <!-- Tema Dark/Light -->
        <input id="switch" type="checkbox">
        <div class="app">
            <div class="body">
                <div class="phone">                
                    <div class="content">
                        <div class="circle">
                        <div class="crescent"></div>
                        </div>
                    
                        <label for="switch">
                        <div class="toggle"></div>
                        <div class="names">
                            <p class="light">Light</p>
                            <p class="dark">Dark</p>
                        </div>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="data-export-section">
            <p>üìÑ Esporta Dati:</p>
            <button onclick="exportDataAsJSON()">üì• Esporta come JSON</button>
            <button onclick="exportDataAsCSV()">üì• Esporta come CSV</button>
        </div>

        <!-- Sicurezza -->
        <div class="security-section">
            <button onclick="cambiaPassword()">üîë Cambia Password</button>
            <button class="delete-account" onclick="eliminaAccount()">‚ùå Elimina Account</button>
        </div>
    </div>

    <button id="toggle-theme" class="theme-button">üåô Modalit√† Scura</button>

    <script>
        function applyTheme() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark') {
              document.body.classList.add('dark-mode');
              document.getElementById('toggle-theme').textContent = '‚òÄÔ∏è Modalit√† Chiara';
            } else {
              document.body.classList.remove('dark-mode');
              document.getElementById('toggle-theme').textContent = 'üåô Modalit√† Scura';
            }
          }
        
          function toggleTheme() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark') {
              localStorage.setItem('theme', 'light');
            } else {
              localStorage.setItem('theme', 'dark');
            }
            applyTheme();
          }
        
          document.addEventListener('DOMContentLoaded', function() {
            // Quando la pagina carica
            if (!localStorage.getItem('theme')) {
              // Se non c'√® un tema salvato, imposta 'light' di default
              localStorage.setItem('theme', 'light');
            }
            applyTheme();
        
            // Event listener sul pulsante
            document.getElementById('toggle-theme').addEventListener('click', toggleTheme);
          });
    </script>

    <script src = "settings.js"></script>
    <script src="../commonJS/commonNavbar.js"></script>
</body>
</html>
